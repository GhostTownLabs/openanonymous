
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Open Anonymous</title>
    <link rel="icon" type="image/png" href="ghost_logo.png"/>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #111;
            color: #eee;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        header {
            padding: 2rem;
        }
        .logo {
            width: 80px;
            height: auto;
            margin-bottom: 1rem;
        }
        h1 {
            font-size: 2.5rem;
            margin: 0;
        }
        .subheadline {
            font-size: 1.2rem;
            color: #bbb;
        }
        .cta, .store-links {
            margin: 2rem;
        }
        .cta button {
            background-color: #e63946;
            color: #fff;
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            cursor: pointer;
        }
        .store-links img {
            height: 50px;
            margin: 0 10px;
            cursor: pointer;
        }
        .confession-feed {
            background-color: #222;
            padding: 2rem;
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }
        .confession-box {
            margin: 2rem auto;
            max-width: 600px;
        }
        textarea {
            width: 100%;
            height: 100px;
            padding: 1rem;
            font-size: 1rem;
        }
        .confession {
            opacity: 0;
            animation: fadeIn 1.5s ease forwards;
            position: relative;
        }
        .report, .delete {
            font-size: 0.8rem;
            color: #999;
            cursor: pointer;
            position: absolute;
            right: 0;
        }
        .report { top: 0; }
        .delete { top: 20px; display: none; }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        footer {
            padding: 1rem;
            font-size: 0.9rem;
            color: #666;
        }
    </style>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <header>
        <img src="ghost_logo.png" alt="Ghost Logo" class="logo">
        <h1>Open Anonymous</h1>
        <p class="subheadline">Speak the truth. Stay in the shadows.</p>
        <div class="cta">
            <button onclick="window.location.href='https://play.google.com/store'">Download App</button>
        </div>
        <div class="store-links">
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" onclick="window.location.href='https://play.google.com/store'">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/96/Download_on_the_App_Store_Badge.svg" onclick="alert('Coming soon to iOS')">
        </div>
    </header>

    <section class="confession-feed" id="confessions">
        <h2>Live Confessions</h2>
        <p>Loading confessions...</p>
    </section>

    <section class="confession-box">
        <h2>Post Yours</h2>
        <textarea id="confessionText" placeholder="Write your truth anonymously..."></textarea><br><br>
        <button onclick="submitConfession()">Submit</button>
    </section>

    <footer>
        &copy; 2025 Open Anonymous | No judgment. Just truth.
    </footer>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCKNXqPvGpyCVLAUEYspohXU_yFnHqMBKg",
            authDomain: "open-anonymous.firebaseapp.com",
            projectId: "open-anonymous",
            storageBucket: "open-anonymous.firebasestorage.app",
            messagingSenderId: "415868600474",
            appId: "1:415868600474:web:13ac1dead401d92b879f23",
            measurementId: "G-D32ZNKR5SF"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let isAdmin = false;

        function submitConfession() {
            const text = document.getElementById('confessionText').value;
            if (text.trim() === "") return;
            db.collection("confessions").add({
                text: text,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                document.getElementById('confessionText').value = "";
                loadConfessions();
            });
        }

        function reportConfession(id) {
            db.collection("reports").add({
                confessionId: id,
                reportedAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            alert("Confession reported.");
        }

        function deleteConfession(id) {
            db.collection("confessions").doc(id).delete().then(() => {
                alert("Confession deleted.");
                loadConfessions();
            });
        }

        function enterAdminMode() {
            const pass = prompt("Enter admin password:");
            if (pass === "ghostmode") {
                isAdmin = true;
                loadConfessions();
            } else {
                alert("Incorrect password.");
            }
        }

        function loadConfessions() {
            const feed = document.getElementById('confessions');
            feed.innerHTML = "<h2>Live Confessions</h2>";
            db.collection("confessions")
              .orderBy("timestamp", "desc")
              .limit(5)
              .get()
              .then((querySnapshot) => {
                  querySnapshot.forEach((doc) => {
                      const p = document.createElement("p");
                      p.textContent = `"${doc.data().text}"`;
                      p.classList.add("confession");

                      const report = document.createElement("span");
                      report.textContent = "âš ï¸";
                      report.classList.add("report");
                      report.onclick = () => reportConfession(doc.id);
                      p.appendChild(report);

                      if (isAdmin) {
                          const del = document.createElement("span");
                          del.textContent = "ðŸ—‘ï¸";
                          del.classList.add("delete");
                          del.style.display = "block";
                          del.onclick = () => deleteConfession(doc.id);
                          p.appendChild(del);
                      }

                      feed.appendChild(p);
                  });
              });
        }

        window.onload = () => {
            loadConfessions();
            document.body.addEventListener("keydown", (e) => {
                if (e.ctrlKey && e.key === "a") {
                    enterAdminMode();
                }
            });
        };
    </script>
</body>
</html>
